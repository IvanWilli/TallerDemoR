<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Reportes |  Taller de R aplicado a la Demografía</title>
  <meta name="description" content="<br />
Taller de R aplicado a la Demografía</p>" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Reportes |  Taller de R aplicado a la Demografía" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="IvanWilli/TallerDemoR" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Reportes |  Taller de R aplicado a la Demografía" />
  
  
  

<meta name="author" content="Ayelén Martinez, Florencia Bathory e Iván Williams" />


<meta name="date" content="2023-10-29" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="funciones.html"/>
<link rel="next" href="tp.html"/>
<script src="libs/jquery/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Taller de R aplciado a la demografía</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introducción</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#información-general"><i class="fa fa-check"></i><b>1.1</b> Información general</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#preparándonos"><i class="fa fa-check"></i><b>1.2</b> PrepaRándonos</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#instalación-de-y-rstudio"><i class="fa fa-check"></i><b>1.2.1</b> Instalación de y RStudio</a></li>
<li class="chapter" data-level="1.2.2" data-path="index.html"><a href="index.html#instalación-de-paquetes"><i class="fa fa-check"></i><b>1.2.2</b> Instalación de paquetes</a></li>
<li class="chapter" data-level="1.2.3" data-path="index.html"><a href="index.html#foro"><i class="fa fa-check"></i><b>1.2.3</b> Foro</a></li>
<li class="chapter" data-level="1.2.4" data-path="index.html"><a href="index.html#por-último"><i class="fa fa-check"></i><b>1.2.4</b> Por último</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#introducción-1"><i class="fa fa-check"></i><b>1.3</b> Introducción</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> R Base</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#el-proyecto-taller"><i class="fa fa-check"></i><b>2.1</b> El proyecto Taller</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="intro.html"><a href="intro.html#variables"><i class="fa fa-check"></i><b>2.1.1</b> Variables</a></li>
<li class="chapter" data-level="2.1.2" data-path="intro.html"><a href="intro.html#actividad-individual"><i class="fa fa-check"></i><b>2.1.2</b> Actividad individual</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#vectores"><i class="fa fa-check"></i><b>2.2</b> Vectores</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="intro.html"><a href="intro.html#actividad"><i class="fa fa-check"></i><b>2.2.1</b> Actividad</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#data.frames"><i class="fa fa-check"></i><b>2.3</b> Data.frames</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="intro.html"><a href="intro.html#actividad-1"><i class="fa fa-check"></i><b>2.3.1</b> Actividad</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#listas"><i class="fa fa-check"></i><b>2.4</b> Listas (*)</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="intro.html"><a href="intro.html#actividad-2"><i class="fa fa-check"></i><b>2.4.1</b> Actividad (*)</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="intro.html"><a href="intro.html#referencias-y-materiales-adicionales"><i class="fa fa-check"></i><b>2.5</b> Referencias y materiales adicionales</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>3</b> dplyr</a>
<ul>
<li class="chapter" data-level="3.1" data-path="dplyr.html"><a href="dplyr.html#lectura-de-datos"><i class="fa fa-check"></i><b>3.1</b> Lectura de datos</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="dplyr.html"><a href="dplyr.html#acceso-a-archivos-no-locales"><i class="fa fa-check"></i><b>3.1.1</b> Acceso a archivos no locales</a></li>
<li class="chapter" data-level="3.1.2" data-path="dplyr.html"><a href="dplyr.html#actividad-3"><i class="fa fa-check"></i><b>3.1.2</b> Actividad</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="dplyr.html"><a href="dplyr.html#dplyr-1"><i class="fa fa-check"></i><b>3.2</b> dplyr</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="dplyr.html"><a href="dplyr.html#seleccionar-select-renombrar-rename"><i class="fa fa-check"></i><b>3.2.1</b> seleccionar (<strong>select</strong>), renombrar (<strong>rename</strong>)</a></li>
<li class="chapter" data-level="3.2.2" data-path="dplyr.html"><a href="dplyr.html#actividad-4"><i class="fa fa-check"></i><b>3.2.2</b> Actividad</a></li>
<li class="chapter" data-level="3.2.3" data-path="dplyr.html"><a href="dplyr.html#resumir-summarise-por-grupos-group_by"><i class="fa fa-check"></i><b>3.2.3</b> resumir (<strong>summarise</strong>) por grupos (<strong>group_by</strong>)</a></li>
<li class="chapter" data-level="3.2.4" data-path="dplyr.html"><a href="dplyr.html#transformar-mutate-filtrar-filter-ordenar-arrange"><i class="fa fa-check"></i><b>3.2.4</b> transformar (<strong>mutate</strong>), filtrar (<strong>filter</strong>), ordenar (<strong>arrange</strong>)</a></li>
<li class="chapter" data-level="3.2.5" data-path="dplyr.html"><a href="dplyr.html#actividad-5"><i class="fa fa-check"></i><b>3.2.5</b> Actividad</a></li>
<li class="chapter" data-level="3.2.6" data-path="dplyr.html"><a href="dplyr.html#recursos-adicionales"><i class="fa fa-check"></i><b>3.2.6</b> Recursos adicionales</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ggplot.html"><a href="ggplot.html"><i class="fa fa-check"></i><b>4</b> ggplot</a>
<ul>
<li class="chapter" data-level="4.1" data-path="ggplot.html"><a href="ggplot.html#introducción-2"><i class="fa fa-check"></i><b>4.1</b> Introducción</a></li>
<li class="chapter" data-level="4.2" data-path="ggplot.html"><a href="ggplot.html#ggplot-1"><i class="fa fa-check"></i><b>4.2</b> ggplot</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="ggplot.html"><a href="ggplot.html#actividad-6"><i class="fa fa-check"></i><b>4.2.1</b> Actividad</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="ggplot.html"><a href="ggplot.html#reproduciendo"><i class="fa fa-check"></i><b>4.3</b> Reproduciendo</a></li>
<li class="chapter" data-level="4.4" data-path="ggplot.html"><a href="ggplot.html#lexisplotr"><i class="fa fa-check"></i><b>4.4</b> LexisPLotR</a></li>
<li class="chapter" data-level="4.5" data-path="ggplot.html"><a href="ggplot.html#estudio-de-cohorte-un-ejemplo"><i class="fa fa-check"></i><b>4.5</b> Estudio de cohorte: un ejemplo</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="ggplot.html"><a href="ggplot.html#actividad-7"><i class="fa fa-check"></i><b>4.5.1</b> Actividad</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="ggplot.html"><a href="ggplot.html#recursos-adicionales-1"><i class="fa fa-check"></i><b>4.6</b> Recursos Adicionales</a></li>
<li class="chapter" data-level="4.7" data-path="ggplot.html"><a href="ggplot.html#otras-visualizaciones"><i class="fa fa-check"></i><b>4.7</b> Otras visualizaciones</a></li>
<li class="chapter" data-level="4.8" data-path="ggplot.html"><a href="ggplot.html#material-adicional-y-no-tanto"><i class="fa fa-check"></i><b>4.8</b> Material adicional (y no tanto)</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="funciones.html"><a href="funciones.html"><i class="fa fa-check"></i><b>5</b> Funciones</a>
<ul>
<li class="chapter" data-level="5.1" data-path="funciones.html"><a href="funciones.html#demografía"><i class="fa fa-check"></i><b>5.1</b> DemogRafía</a></li>
<li class="chapter" data-level="5.2" data-path="funciones.html"><a href="funciones.html#funciones-1"><i class="fa fa-check"></i><b>5.2</b> Funciones</a></li>
<li class="chapter" data-level="5.3" data-path="funciones.html"><a href="funciones.html#crecimiento"><i class="fa fa-check"></i><b>5.3</b> Crecimiento</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="funciones.html"><a href="funciones.html#actividad-8"><i class="fa fa-check"></i><b>5.3.1</b> Actividad</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="funciones.html"><a href="funciones.html#estandarizando"><i class="fa fa-check"></i><b>5.4</b> Estandarizando</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="funciones.html"><a href="funciones.html#actividades"><i class="fa fa-check"></i><b>5.4.1</b> Actividades</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="funciones.html"><a href="funciones.html#funciones-demográficas-en-paquetes-demográficos"><i class="fa fa-check"></i><b>5.5</b> Funciones demográficas en paquetes demográficos</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="funciones.html"><a href="funciones.html#tablas-de-mortalidad"><i class="fa fa-check"></i><b>5.5.1</b> Tablas de mortalidad</a></li>
<li class="chapter" data-level="5.5.2" data-path="funciones.html"><a href="funciones.html#evaluación-de-declaración-de-edad"><i class="fa fa-check"></i><b>5.5.2</b> Evaluación de declaración de edad</a></li>
<li class="chapter" data-level="5.5.3" data-path="funciones.html"><a href="funciones.html#graduación-de-población-por-edad-simple"><i class="fa fa-check"></i><b>5.5.3</b> Graduación de población por edad simple</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="reportes.html"><a href="reportes.html"><i class="fa fa-check"></i><b>6</b> Reportes</a>
<ul>
<li class="chapter" data-level="6.1" data-path="reportes.html"><a href="reportes.html#comunicación-y-reproducibilidad"><i class="fa fa-check"></i><b>6.1</b> Comunicación y Reproducibilidad</a></li>
<li class="chapter" data-level="6.2" data-path="reportes.html"><a href="reportes.html#actividad-guiada"><i class="fa fa-check"></i><b>6.2</b> Actividad guiada</a></li>
<li class="chapter" data-level="6.3" data-path="reportes.html"><a href="reportes.html#referencias"><i class="fa fa-check"></i><b>6.3</b> Referencias</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="tp.html"><a href="tp.html"><i class="fa fa-check"></i><b>7</b> TP</a>
<ul>
<li class="chapter" data-level="7.1" data-path="tp.html"><a href="tp.html#hemos-llegado"><i class="fa fa-check"></i><b>7.1</b> Hemos llegado:</a></li>
<li class="chapter" data-level="7.2" data-path="tp.html"><a href="tp.html#consigna"><i class="fa fa-check"></i><b>7.2</b> Consigna</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><p><img src="figs/logoUNLU.png" /><br />
Taller de R aplicado a la Demografía</p></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="reportes" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">6</span> Reportes<a href="reportes.html#reportes" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="comunicación-y-reproducibilidad" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Comunicación y Reproducibilidad<a href="reportes.html#comunicación-y-reproducibilidad" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Hasta acá fuimos realizando el siguiente flujo:</p>
<p>Lo que resta: <strong>¿cómo comunicarlo?</strong>.</p>
<p>Para esto aprenderemos las nociones básicas de <a href="https://rmarkdown.rstudio.com/">RMarkdown</a>, que integra <strong>texto + código</strong>, permitiendo la reproducibilidad que comentamos al inicio del taller.</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="reportes.html#cb190-1" tabindex="-1"></a><span class="co"># install.packages(&quot;rmarkdown&quot;)</span></span>
<span id="cb190-2"><a href="reportes.html#cb190-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;rmarkdown&quot;</span>)</span>
<span id="cb190-3"><a href="reportes.html#cb190-3" tabindex="-1"></a><span class="co"># install.packages(&quot;knitr&quot;)</span></span>
<span id="cb190-4"><a href="reportes.html#cb190-4" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;knitr&quot;</span>)</span></code></pre></div>
<p>Aquí veremos la opción para generar documentos/reportes pensando en diseñar tu próximo paper o informe de resultados.</p>
<p>Empecemos por crear un documento <strong>R Markdown</strong> mediante el template (muestra) por defecto de RStudio en <em>HTML</em> (yendo a <em>File &gt; New File &gt; R Markdown</em>), y démosle un nombre. Ten a mano la <a href="https://www.rstudio.com/blog/the-r-markdown-cheat-sheet/">Hoja de Ayuda</a>.</p>
<p>¡Antes que nada! Veamos qué genera sin modificarlo. Debemos ejecutar <em>Knit</em>, mediante el botón en el menú o <em>Ctrl + Shift + K</em> (internamente RStudio, mediante el paquete <a href="https://en.wikipedia.org/wiki/Knitr">knitr</a>, integra el documento <a href="https://en.wikipedia.org/wiki/Markdown">markdown</a> con los resultados del código en R, para que luego el paquete <a href="https://pandoc.org/">pandoc</a> lo convierta al tipo que deseás).</p>
<p>Lo que acabas de ver es un tipo de salida <em>HTML</em>, pero puedes lograr un pdf o word también (cada uno tiene un template para que exprimentes). Más allá de este formato, la estructura de todo documento tiene tres partes: <strong>YAML</strong> (o cabezal), el <strong>texto</strong> y los <strong>chunks</strong>.</p>
<ul>
<li><p><strong>YAML</strong> (cabezal): va al inicio entre giones medio <code>---</code>. Explicita las propiedades generales del documento: título, autor, formato de salida (<em>html</em>,<em>pdf</em>, etc.) y fecha en que se produjo el documento.</p></li>
<li><p><strong>Texto</strong>: En el segundo escribimos jerárquicamente el documento, señalizando esto mediante sucesivos asteri<code>s</code>cos<code>.</code>. Por ejemplo los títulos, subtítulos tendrán <code>#</code> y <code>##</code> (esto será importante si quieres dejar visible un índice). Imagínate las funcionalidades cuando escribes en Word, esto es similar: cursiva <code>*cursiva*</code>, negrita <code>**negrita**</code>, ecuaciones x^2 <code>$x^2$</code>, hipervínculos <code>[link](www.rstudio.com)</code> etc. El salto de párrafo se realiza mediante dos espacios o doble enter.</p></li>
<li><p><strong>Chunks</strong>: acá va el <code>¡CÓDIGO!</code>, lo que se va generando en la sesión del documento. Los insertas mediante el botón en el menú o combinando las teclas <em>Ctrl + Alt + I</em>. Se activa comenzando con <code>{r} y se finaliza con</code>.
Como atributos principales de los chunks se encuentran:</p>
<ul>
<li><code>r</code> señalando el lenguaje (se puede nombrar el chunk tambien),</li>
<li><code>eval</code> (¿corro el chunk cuando hago <code>knit</code>?),</li>
<li><code>echo</code> (¿Muestro el código?),<br />
</li>
<li><code>message</code> (¿muestro los mensajes del proceso?).</li>
<li><code>warnings</code> (¿muestro las advertencias del proceso?).</li>
</ul></li>
</ul>
<p>También pueden generarse líneas de código <a href="https://rmarkdown.rstudio.com/lesson-4.html">en el medio de una oración</a>.</p>
<p>Visualicemos sus partes:</p>
<blockquote>
<p>Dentro de RMarkdown el directorio de trabajo es aquel donde se encuentra el “.Rmd”.</p>
</blockquote>
</div>
<div id="actividad-guiada" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Actividad guiada<a href="reportes.html#actividad-guiada" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Hagamos un documento a partir del template creado, que nos deje <em>un esqueleto</em> para la resolución del TP final.</p>
<p>Desde la Secretaría de la Vivienda estan preocupados por la situación habitacional de los porteños, y para tener una primer referencia nos solicitan un breve reporte sobre el porcentaje de viviendas particulares no habitadas según Comuna en 2010, en lo posible segmentando tres grupos en un mapa. El reporte deberá mostrar el porcentaje de viviendas deshabitadas en un mapa y en una tabla, comentando en el texto cuantas vivendas particualres hay en total.</p>
<p>Para la construcción del mapa primero obtengamos el archivo <a href="https://es.wikipedia.org/wiki/Shapefile">shapefile</a>, que contiene los elementos geográficos, su geo-localización y su relación con el plano. Haremos uso de la información disponible en <a href="https://www.indec.gob.ar/indec/web/Institucional-Indec-Codgeo">INDEC</a>, al nivel de departamento, que inlcuye datos demográficos del C2010. El paquete <em>rgdal</em> nos permitirá integrar los archivos que lo componen y manipularlo.
Luego usaremos el paquete <a href="https://rstudio.github.io/leaflet/">leaflet</a>, que permite realizar mapas interactivos embebibles en documentos o webs. Generaremos una escala de 4 colores, usando una paleta predefinida (más <a href="https://rstudio.github.io/leaflet/colors.html">opciones</a>).</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="reportes.html#cb191-1" tabindex="-1"></a><span class="co"># estos paquetes deberíamos tenerlo instalados previamente</span></span>
<span id="cb191-2"><a href="reportes.html#cb191-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb191-3"><a href="reportes.html#cb191-3" tabindex="-1"></a><span class="fu">library</span>(rgdal)</span>
<span id="cb191-4"><a href="reportes.html#cb191-4" tabindex="-1"></a><span class="fu">library</span>(spdplyr)</span>
<span id="cb191-5"><a href="reportes.html#cb191-5" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb191-6"><a href="reportes.html#cb191-6" tabindex="-1"></a></span>
<span id="cb191-7"><a href="reportes.html#cb191-7" tabindex="-1"></a><span class="co"># leo Shapefile y convierto a número algunas variables que me servirán</span></span>
<span id="cb191-8"><a href="reportes.html#cb191-8" tabindex="-1"></a>CABA <span class="ot">&lt;-</span> <span class="fu">readOGR</span>(<span class="st">&quot;Data/pxdptodatosok.shp&quot;</span>, <span class="at">encoding =</span> <span class="st">&#39;UTF-8&#39;</span>, <span class="at">verbose =</span> F) <span class="sc">%&gt;%</span> </span>
<span id="cb191-9"><a href="reportes.html#cb191-9" tabindex="-1"></a>        <span class="fu">filter</span>(codpcia <span class="sc">%in%</span> <span class="st">&quot;02&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb191-10"><a href="reportes.html#cb191-10" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">viv_part_h =</span> <span class="fu">as.integer</span>(<span class="fu">as.character</span>(viv_part_h)),</span>
<span id="cb191-11"><a href="reportes.html#cb191-11" tabindex="-1"></a>               <span class="at">viv_part =</span> <span class="fu">as.integer</span>(<span class="fu">as.character</span>(viv_part)),</span>
<span id="cb191-12"><a href="reportes.html#cb191-12" tabindex="-1"></a>               <span class="at">porc_viv_deshab =</span> <span class="fu">round</span>((<span class="dv">1</span><span class="sc">-</span>viv_part_h<span class="sc">/</span>viv_part)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">1</span>))</span>
<span id="cb191-13"><a href="reportes.html#cb191-13" tabindex="-1"></a></span>
<span id="cb191-14"><a href="reportes.html#cb191-14" tabindex="-1"></a><span class="fu">class</span>(CABA)</span></code></pre></div>
<p>El mapa:</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="reportes.html#cb192-1" tabindex="-1"></a><span class="co"># A partir una paleta prediseñada, divido en cuatro grupos de igual tamaño</span></span>
<span id="cb192-2"><a href="reportes.html#cb192-2" tabindex="-1"></a>mi_paleta_de_4_grupos <span class="ot">&lt;-</span> <span class="fu">colorQuantile</span>(<span class="st">&quot;YlOrRd&quot;</span>, CABA<span class="sc">@</span>data<span class="sc">$</span>porc_viv_deshab, <span class="at">n =</span> <span class="dv">4</span>)  </span>
<span id="cb192-3"><a href="reportes.html#cb192-3" tabindex="-1"></a></span>
<span id="cb192-4"><a href="reportes.html#cb192-4" tabindex="-1"></a><span class="co"># genero el mapa</span></span>
<span id="cb192-5"><a href="reportes.html#cb192-5" tabindex="-1"></a>CABA_map <span class="ot">&lt;-</span> <span class="fu">leaflet</span>(CABA) <span class="sc">%&gt;%</span></span>
<span id="cb192-6"><a href="reportes.html#cb192-6" tabindex="-1"></a>                <span class="fu">addTiles</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb192-7"><a href="reportes.html#cb192-7" tabindex="-1"></a>                <span class="fu">addPolygons</span>(<span class="at">fillColor =</span> <span class="sc">~</span><span class="fu">mi_paleta_de_4_grupos</span>(porc_viv_deshab),</span>
<span id="cb192-8"><a href="reportes.html#cb192-8" tabindex="-1"></a>                            <span class="at">color =</span> <span class="st">&quot;grey&quot;</span>,</span>
<span id="cb192-9"><a href="reportes.html#cb192-9" tabindex="-1"></a>                            <span class="at">fillOpacity =</span> .<span class="dv">5</span>,</span>
<span id="cb192-10"><a href="reportes.html#cb192-10" tabindex="-1"></a>                            <span class="at">popup =</span> <span class="sc">~</span>departamen, </span>
<span id="cb192-11"><a href="reportes.html#cb192-11" tabindex="-1"></a>                            <span class="at">label =</span> <span class="sc">~</span><span class="fu">paste0</span>(departamen, <span class="st">&quot;: &quot;</span>,porc_viv_deshab, <span class="st">&quot;%&quot;</span>))</span>
<span id="cb192-12"><a href="reportes.html#cb192-12" tabindex="-1"></a><span class="co"># lo imprimo</span></span>
<span id="cb192-13"><a href="reportes.html#cb192-13" tabindex="-1"></a>CABA_map</span></code></pre></div>
<blockquote>
<p>“Nadie ignora que el Sur empieza del otro lado de Rivadavia” (El Sur, Borges, 1944).</p>
</blockquote>
<p>Una tabla muuuy básica con <a href="https://bookdown.org/yihui/rmarkdown-cookbook/kable.html">kable</a>. No lo veremos aquí pero el paquete <code>kable</code> se complementa con <a href="https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html">kableExtra</a> para obtener tablas más personalizadas y publicables].</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="reportes.html#cb193-1" tabindex="-1"></a>CABA <span class="sc">%&gt;%</span> </span>
<span id="cb193-2"><a href="reportes.html#cb193-2" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb193-3"><a href="reportes.html#cb193-3" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Departamento =</span> departamen, <span class="at">Porc_Viv_deshabitadas =</span> porc_viv_deshab) <span class="sc">%&gt;%</span> </span>
<span id="cb193-4"><a href="reportes.html#cb193-4" tabindex="-1"></a>  <span class="fu">select</span>(Departamento, Porc_Viv_deshabitadas) <span class="sc">%&gt;%</span> </span>
<span id="cb193-5"><a href="reportes.html#cb193-5" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code></pre></div>
<p>Si quisiéramos incluir el dato de cuántas personas en viviendas particulares había en CABA, lo que debemos incluir como <strong>chunk inline</strong> sería: `<strong>r sum(CABA$viv_part)</strong>`, es decir 1423973 personas.</p>
<blockquote>
<p>Acordate de guardarlo como ejemplo para el TP.</p>
</blockquote>
</div>
<div id="referencias" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Referencias<a href="reportes.html#referencias" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p><a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/translations/spanish/rmarkdown_es.pdf">Hoja de Ayuda</a></p></li>
<li><p><a href="https://bookdown.org/yihui/rmarkdown/">De su creador</a></p></li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="funciones.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tp.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/05-reportes.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["https://github.com/rstudio/bookdown-demo/raw/master/05-reportes.Rmd"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
